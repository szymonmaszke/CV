% !TEX TS-program = xelatex
% !TEX encoding = UTF-8 Unicode

% https://olivierpieters.be/blog/2017/10/02/designing-a-cv-in-latex-part-2

\documentclass[11pt]{article}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%                                   PACKAGES
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% more advanced expressions in \setlength
\usepackage{float}
\usepackage{calc}
\usepackage{fontspec}
% workaround for XeTeX and fontawesome
\usepackage{fontawesome}
\usepackage{enumitem}
\usepackage{setspace}
\usepackage{xcolor}
\usepackage{tikz}
\usetikzlibrary{calc,positioning,backgrounds,matrix}

% load external fonts
\usepackage[default]{lato}

% advanced drawing

% No page numbering
\usepackage{nopageno}
\usepackage{anyfontsize}
\usepackage{graphicx, calc}
\usepackage{hyperref}


\newlength\Margin
\setlength\Margin{1cm}

\usepackage[margin=0.5\Margin,noheadfoot,a4paper]{geometry}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%                           VARIABLES & LENGTHS
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\TopBarHeight}{0.28}
\newcommand{\SideBarWidth}{0.3}

% other lengths
\newlength\cvSideWidth
\setlength\cvSideWidth{\SideBarWidth\paperwidth-\Margin}

\newlength\cvSideBar
\setlength\cvSideBar{\SideBarWidth\paperwidth}

\newlength\cvMainWidth
\setlength\cvMainWidth{\paperwidth-4\Margin-\cvSideWidth}


\newlength\cvTopHeight
\setlength\cvTopHeight{\TopBarHeight\paperheight-\Margin}

\newlength\cvMainHeight
\setlength\cvMainHeight{\paperheight-4\Margin-\cvTopHeight}

\newlength\cvTopHeightMargin
\setlength\cvTopHeightMargin{-\cvTopHeight+2\Margin}

\newlength\cvSectionHeight
\setlength\cvSectionHeight{1.4cm}


\newlength{\textStart}
\setlength\textStart{\cvTopHeightMargin+\cvSectionHeight}

\newlength{\cvMiddleSidebar}
\setlength\cvMiddleSidebar{\cvSideWidth + 2\Margin}

\newlength{\cvTopBarIconSpacing}
\setlength\cvTopBarIconSpacing{-0.5cm}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%                                   COLORS
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\definecolor{topbar}{HTML}{eceff1}
\definecolor{sidebar}{HTML}{cfd8dc}
\definecolor{background}{HTML}{f5f5f5}
\definecolor{text}{HTML}{37474f}
\definecolor{annotation}{HTML}{757575}
\definecolor{clause}{HTML}{b0bec5}

\pagecolor{background}
\color{text}

% icon colors
\definecolor{phone}{HTML}{43a047}
\definecolor{location}{HTML}{3d5afe}

% brand colors
\definecolor{linkedin}{HTML}{0072b1}
\definecolor{github}{HTML}{333333}
\definecolor{gmail}{HTML}{DB4437}
\definecolor{stackoverflow}{HTML}{F48024}

% section colors
\definecolor{skills}{HTML}{ec407a}
\definecolor{languages}{HTML}{26c6da}
\definecolor{education}{HTML}{fbc02d}
\definecolor{work}{HTML}{9fa8da}
\definecolor{foss}{HTML}{c0ca33}

% tags color
\definecolor{skilltag}{HTML}{0366d6}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%                                ENVIRONMENTS
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newenvironment{cvtext}{\par\color{text}}{\par}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%                                  RULERS
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\makeatletter
\def\fossrulefill{\vspace{-5mm}\leavevmode\leaders\hrule height 1pt\hfill\kern\z@\vspace{1mm}}
\makeatother

\makeatletter
\def\skillsrulefill{\vspace{-1mm}\leavevmode\leaders\hrule height 1pt\hfill\kern\z@\vspace{1mm}}
\makeatother


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%                                 COMMANDS
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Create skill tags in skills bar
%   1 - Name of skill tag
\newcommand{\skilltag}[1]{%
  \tikz[baseline]\node[anchor=base,fill=skilltag,opacity=.1,
    text opacity=1., rounded corners,
    inner xsep=1ex,inner ysep =0.75ex,text height=1.5ex,text depth=.25ex]{#1};
}


% Create Privacy compliant clause at the end of document.
\newcommand{\clause}{
  \begin{spacing}{0.25}
    \textcolor{clause}{
      \tiny{
        I hereby give consent for my personal data included in my application to be processed for the purposes of the recruitment process under the European Parliament's
        and Council of the European Union Regulation on the Protection of Natural Persons as of 27 April 2016, with regard to the processing of personal data and
        on the free movement of such data, and repealing Directive 95/46/EC (Data Protection Directive)
      }
    }
  \end{spacing}
}

% Create name and surname at top left corner
%   1 - Name
%   2 - Surname
\newcommand{\name}[2]{
  \node (username) at ($(current page.north west)+(\cvMiddleSidebar / 2, 0cm)$)
    [below, text width = \cvSideWidth]
    {
      \begin{cvtext}
        \begin{center}

          \fontsize{40}{48}\selectfont #1
          \textbf{#2}

        \end{center}
      \end{cvtext}
  };
}

% Create open source project
%   1 - name of project
%   2 - href to project
%   3 - number of stars
%   4 - release date
%   5 - first description
%   6 - second description
\newcommand{\project}[6]{
  \textbf{
    \href{#2}{\large \faGithub\space #1} \hfill
  }
  \textcolor{annotation}{
    \faStar\space #3 \hfill
    \faCalendar\space #4
  }
  \vspace{-2.5mm}

  \begin{itemize}[leftmargin=*]
    \setlength\itemsep{0mm}
    \item #5
    \item #6
  \end{itemize}
}

% Create work entry
%   1 - name of work
%   2 - location of work
%   3 - start date
%   4 - finish date
%   5 - list with job descriptions
\newcommand{\work}[5]{
  \textbf{
    \large \faBriefcase\space #1 \hfill
    \faMapMarker\space #2 \hfill
  }
  \textcolor{annotation}{\faCalendar\space #3-#4}
  \vspace{-0.1cm}
  \begin{itemize}[leftmargin=*]
    \setlength\itemsep{0mm}
    \foreach \Description in #5{
      \item \Description
    }
  \end{itemize}
  \vspace{0.05cm}
}

% Create education entry
%   1 - name and rank
%   2 - university
%   3 - Other (location, GPA)
%   4 - Start date
%   5 - End date
\newcommand{\education}[5]{
  \begin{cvtext}
    \begin{center}
      \textbf{\large #1}
    \end{center}
  \end{cvtext}
  \vspace*{-0.3cm}
  \small{
    \textcolor{annotation}{
      \faUniversity\space #2
      \hfill #3
      \hfill \faCalendar\space #4-#5
    }
  }
}

% Create top bar icon
%   1 - [optional] relative location of icon (below or east usually)
%   2 - Name of node (and name of color)
%   3 - Location of icon
%   4 - Icon
%   5 - Text displayed to the right
\newcommand{\icon}[5][below]{
  \node (#2) at (#3)
    [rectangle, fill=#2, #1,
    minimum width=1cm, minimum height=1cm]{
      \textcolor{background}{\Large #4}
  };
  \node (#2 data) at (#2.east) [right, text width = \cvSideWidth] {
    \textcolor{text}{#5}
  };
}

% Create top bar icon
%   1 - [optional] relative location of icon (below or east usually)
%   2 - Name of node (and name of color)
%   3 - Location of icon
%   4 - Icon
%   5 - Text displayed to the right
\newcommand{\sidebarEnum}[5][below]{
  \node (#2) at (#3)
    [
      rectangle, fill=#2, #1,
      minimum width=\cvSideWidth+2\Margin, minimum height=\cvSectionHeight
    ]{
      #4
  };
  \node (#2 data) at ($(#2.south) + (0cm, 2mm)$) [below, text width = \cvSideWidth] {
    \textcolor{text}{
      \begin{itemize}
        \foreach \Icon/\Description in #5{
          \item[\Icon] \Description
        }
      \end{itemize}
    }
  };
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%                                 DOCUMENT
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}
  % Algorithmic tags
  \input{data/tags.txt}
  % Bars
  \begin{tikzpicture}[remember picture, overlay]
    \fill[sidebar] (current page.north west) rectangle ++(\cvSideWidth+2\Margin,-\paperheight);
    \fill[topbar] (current page.north west) rectangle +(\paperwidth, \cvTopHeightMargin);
  \end{tikzpicture}

  % Sidebar
  \begin{tikzpicture}[remember picture, overlay]
    \name{Szymon}{Maszke}
    % Calculate it properly
    % GitHub
    \sidebarEnum{github}{$(current page.north west)+(\cvMiddleSidebar / 2,\textStart)+(0cm,-1.4\Margin)$}
      {\textcolor{background}{\Large \textbf{\faGithub\space GitHub}}}
      {
        {
          \faStar/\textbf{\input{data/stars.txt}}stars received,
          \faPlus/\textbf{\input{data/contributions.txt}}contributions,
          \faUser/\textbf{\input{data/followers.txt}}followers,
        }
      }

    \sidebarEnum{stackoverflow}{$(github data.south)+(0cm, \Margin-2.8mm)$}
      {
        \Large{
          \textcolor{background}{\faStackOverflow\space }
          \textcolor{text}{stack\textbf{overflow}}
        }
      }
      {
        {
          \faStar/\input{data/stack-special1.txt},
          \faTrophy/\input{data/stack-special2.txt},
          \faCheck/\textbf{\input{data/answers.txt}}answers,
          \faThumbsUp/\textbf{\input{data/points.txt}}points,
          \faUser/\textbf{\input{data/reached.txt}}reached,
        }
      }

    \node (skills) at ($(stackoverflow data.south) + (0mm, \Margin-2.5mm)$)
      [rectangle, fill=skills, below,
      minimum width=\cvSideWidth+2\Margin, minimum height=\cvSectionHeight]
      {\textcolor{background}{\Large\textbf{\faCogs\space Skills}}};
    \node (skills data) at ($(skills.south)+(0cm, -2mm)$) [below, text width = \cvSideWidth] {
      \skilltag{python} \href{https://github.com/szymonmaszke/numpp}{\skilltag{C++}} \skilltag{java}

      \skilltag{C} \href{https://github.com/szymonmaszke/xms}{\skilltag{SQL}} \skilltag{R}
      \href{https://stackoverflow.com/questions/55206227/why-bashrc-is-not-executed-when-run-docker-container/55213158#55213158}{\skilltag{bash}}

      \skillsrulefill

      % Machine Learning
      \skilltag{numpy}
      \href{https://stackoverflow.com/questions/55675788/how-can-i-lemmatize-list-of-lists-in-python-using-spacy/55676283#55676283}{\skilltag{spacy}} \skilltag{nltk}

      \href{https://stackoverflow.com/questions/55009704/why-is-cross-val-predict-not-appropriate-for-measuring-the-generalisation-error/55010603#55010603}{\skilltag{scikit-learn}}
      \href{https://stackoverflow.com/questions/55601928/apply-multiple-standardscalers-to-individual-groups/55602630#55602630}{\skilltag{pandas}}

      \skillsrulefill

      % Deep Learning
      \skilltag{pytorch}
      \href{https://stackoverflow.com/questions/57086301/custom-neural-network-implementation-on-mnist-using-tensorflow-2-0/57136842#57136842}{\skilltag{tensorflow2.x}}

      \href{https://stackoverflow.com/questions/55421290/tensorflow-2-0-keras-how-to-write-image-summaries-for-tensorboard/55754700#55754700}{\skilltag{keras}} \skilltag{tensorflow1.x}

      \skillsrulefill

      \skilltag{tox} \skilltag{pytest} \skilltag{travis}
      \skilltag{github-actions} \skilltag{dvc}

      \skillsrulefill

      % Other
      \skilltag{docker} \href{https://github.com/szymonmaszke/dotfiles}{\skilltag{linux}} \skilltag{make}
      \skilltag{aws-lambda} \skilltag{openmp}
    };

    \sidebarEnum{languages}{$(skills data.south) + (0mm, -2.5mm)$}
      {\textcolor{background}{\Large\textbf{\faCommenting\space Languages}}}
      {
        {
          \faVolumeUp/\textbf{Polish} native,
          \faVolumeUp/\textbf{English} C1
        }
      }

  \end{tikzpicture}

  % Top Bar
  \begin{tikzpicture}[remember picture, overlay]
    % First column
    \icon{gmail}{$(current page.north west)+(\cvMiddleSidebar+\Margin,-\Margin / 2)$}
      {\faEnvelopeO}{\href{mailto:szymon@maszke.com}{szymon@maszke.com}}
    \icon{phone}{$(gmail.south) + (0cm, \cvTopBarIconSpacing)$}
      {\faPhone}{(+48) 535 151 042}
    \icon{location}{$(phone.south) + (0cm, \cvTopBarIconSpacing)$}
      {\faMapMarker}{Poland, Krak√≥w}
    % Second column
    \icon[right]{linkedin}{gmail data.east}
      {\faLinkedin}{\href{https://www.linkedin.com/}{Szymon Maszke}}
    \icon{github}{$(linkedin.south) + (0cm, \cvTopBarIconSpacing)$}
      {\faGithub}{\href{https://github.com/szymonmaszke}{szymonmaszke}}
    \icon{stackoverflow}{$(github.south) + (0cm, \cvTopBarIconSpacing)$}
      {\faStackOverflow}{\href{https://stackoverflow.com/users/10886420/szymon-maszke?tab=topactivity}{Szymon Maszke}}
  \end{tikzpicture}

  % Main section
  \begin{tikzpicture}[remember picture, overlay]

    % Education
    \node (education) at ($(current page.north west)+(\paperwidth-\cvMiddleSidebar+\Margin / 2,\textStart)+(-0.5mm,-2.1cm)$)
      [rectangle, fill=education, minimum width=\paperwidth-\cvMiddleSidebar, minimum height=\cvSectionHeight]
      {\Large \textbf{\textcolor{text}{\faGraduationCap\space Education}}};
    \node (education data) at (education.south) [below, text width = \paperwidth-\cvMiddleSidebar-\Margin] {
        \vspace*{-0.35cm}
        \education{M.Sc. Computer Science (Machine Learning specialization)}
        {Jagiellonian University}{\faTrophy\space GPA 4.7/5.0 (ML 4.9+/5.0)}
        {2018}{2021}

        \vspace*{-0.25cm}
        \education{B.Sc. Computer Science}
        {Jagiellonian University}{\faMapMarker\space Faculty of Physics}
        {2014}{2017}
    };

    % Work
    \node (work) at ($(education data.south)+(0cm, -2.3mm)$)
      [rectangle, fill=work, below,
      minimum width=\paperwidth-\cvMiddleSidebar, minimum height=\cvSectionHeight]
      {\Large \textbf{\textcolor{text}{\faBriefcase\space Work}}};
    \node (work data) at (work.south) [below, text width = \paperwidth-\cvMiddleSidebar-\Margin] {
      \begin{cvtext}
        \work{Freelance Machine Learning}{Remote}{08.2019}{06.2020}
        {
          {Developed cost-effective neural network art tagger (\textbf{see torch* below})}
        }

        \work{Machine Learning Research}{\href{https://codete.com/}{Codete}}{04.2018}{09.2018}
        {
          {
            Developed \& tested POC Keras \faArrowsH Tensorflow neural network converter,
            Co-created company's commercial Machine Learning \& NLP courses,
            Developed \& managed promotional algorithmic/hacking challenges
          }
        }
      \end{cvtext}
    };

    % Open Source
    \node (foss) at ($(work data.south)+(0cm, 2.89mm)$)
      [rectangle, fill=foss, below,
      minimum width=\paperwidth-\cvMiddleSidebar, minimum height=\cvSectionHeight]
      {\Large \textbf{\textcolor{text}{\faHeart\space Open Source}}};
    \node (foss data) at (foss.south) [below, text width = \paperwidth-\cvMiddleSidebar-\Margin] {
      \begin{cvtext}
        \project{szymonmaszke/seafig}{https://github.com/szymonmaszke/seafig}{?}{11.2020}
        {Configuration management framework (like \href{https://github.com/facebookresearch/hydra}{\textbf{facebookresearch/hydra}})}
        {Reduces manual argument passing and automates the process}

        \fossrulefill

        \project{szymonmaszke/sciper}{https://github.com/szymonmaszke/sciper}{?}{11.2020}
        {Management framework for \textbf{SCI}entific ex\textbf{PER}iments (like \href{https://mlflow.org/}{\textbf{mlflow}})}
        {Simplifies experimenting, integrates with machine learning ecosystem}

        \fossrulefill

        \project{szymonmaszke/torchlayers}{https://github.com/szymonmaszke/torchlayers}{507}{03.2020}
        {Shape \& dimension inference for PyTorch (like \href{https://keras.io/}{\textbf{Keras}})}
        {Improves prototyping speed, zero overhead, featured on \href{https://www.kdnuggets.com/2020/04/pytorch-models-torchlayers.html}{KDNuggets}}

        \fossrulefill

        \project{szymonmaszke/torchlambda}{https://github.com/szymonmaszke/torchlambda}{67}{03.2020}
        {Lightweight deployment of PyTorch neural networks to AWS Lambda}
        {Reduced fixed costs of AI infrastructure (1M free requests)}

        \fossrulefill

        \project{szymonmaszke/torchdata}{https://github.com/szymonmaszke/torchdata}{188}{09.2019}
        {Extended PyTorch datasets with cache, map etc. (like \href{https://www.tensorflow.org/guide/data}{\textbf{tensorflow.data}})}
        {\faTrophy\space One of \href{https://devpost.com/software/torch-torchdata-torchfunc}{PyTorch Global Summer Hackathon 2019} winning projects}

      \end{cvtext}

      \vspace{-1mm}

      \clause
    };

  \end{tikzpicture}

\end{document}
